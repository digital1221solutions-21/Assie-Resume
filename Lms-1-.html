<!DOCTYPE html>
<html lang="en" class="theme-light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI and Python! - Online AI Teaching</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <style>
        :root, .theme-light {
            --bg-primary: #f9fafb; /* gray-50 */
            --bg-secondary: #ffffff;
            --bg-accent: #f0f2f5; /* indigo-50 */
            --bg-input: #ffffff;
            --bg-modal: #ffffff;
            --text-primary: #1f2937; /* gray-800 */
            --text-secondary: #4b5563; /* gray-600 */
            --text-muted: #6b7280; /* gray-500 */
            --border-color: #e5e7eb; /* gray-200 */
            --shadow-color: rgba(0, 0, 0, 0.1);
            --popover-bg: #ffffff;
            --popover-border: #e5e7eb;
            --popover-shadow: rgba(0, 0, 0, 0.1);
            --popover-text: #374151;
            --popover-hover-bg: #f3f4f6;
            --popover-disabled-text: #9ca3af;
        }

        .theme-dark {
            --bg-primary: #000000;
            --bg-secondary: #171717;
            --bg-accent: #1f2937;
            --bg-input: #262626;
            --bg-modal: #111827;
            --text-primary: #f9fafb;
            --text-secondary: #d4d4d8;
            --text-muted: #a3a3a3;
            --border-color: #404040;
            --shadow-color: rgba(0, 0, 0, 0);
            --popover-bg: #1f2937;
            --popover-border: #374151;
            --popover-shadow: rgba(0, 0, 0, 0.2);
            --popover-text: #d1d5db;
            --popover-hover-bg: #374151;
            --popover-disabled-text: #6b7280;
        }

        .theme-gray {
            --bg-primary: #111827;
            --bg-secondary: #1f2937;
            --bg-accent: #374151;
            --bg-input: #4b5563;
            --bg-modal: #111827;
            --text-primary: #f9fafb;
            --text-secondary: #d1d5db;
            --text-muted: #9ca3af;
            --border-color: #4b5563;
            --shadow-color: rgba(0, 0, 0, 0);
            --popover-bg: #374151;
            --popover-border: #4b5563;
            --popover-shadow: rgba(0, 0, 0, 0.2);
            --popover-text: #d1d5db;
            --popover-hover-bg: #4b5563;
            --popover-disabled-text: #6b7280;
        }
        
        .theme-light-dark {
            --bg-primary: #1f2937; /* gray-800 */
            --bg-secondary: #374151; /* gray-700 */
            --bg-accent: #4b5563; /* gray-600 */
            --bg-input: #4b5563;
            --bg-modal: #1f2937;
            --text-primary: #f3f4f6; /* gray-100 */
            --text-secondary: #d1d5db; /* gray-300 */
            --text-muted: #9ca3af; /* gray-400 */
            --border-color: #4b5563; /* gray-600 */
            --shadow-color: rgba(0, 0, 0, 0);
             --popover-bg: #4b5563;
            --popover-border: #6b7280;
            --popover-shadow: rgba(0, 0, 0, 0.2);
            --popover-text: #f3f4f6;
            --popover-hover-bg: #6b7280;
            --popover-disabled-text: #9ca3af;
        }
        
        .theme-light-gray {
            --bg-primary: #f3f4f6;
            --bg-secondary: #ffffff;
            --bg-accent: #e5e7eb;
            --bg-input: #ffffff;
            --bg-modal: #ffffff;
            --text-primary: #1f2937;
            --text-secondary: #4b5563;
            --text-muted: #6b7280;
            --border-color: #d1d5db;
            --shadow-color: rgba(0, 0, 0, 0.08);
            --popover-bg: #ffffff;
            --popover-border: #e5e7eb;
            --popover-shadow: rgba(0, 0, 0, 0.1);
            --popover-text: #374151;
            --popover-hover-bg: #f3f4f6;
            --popover-disabled-text: #9ca3af;
        }

        .theme-magenta {
            --bg-primary: #fdf2f8;
            --bg-secondary: #ffffff;
            --bg-accent: #fce7f3;
            --bg-input: #ffffff;
            --bg-modal: #ffffff;
            --text-primary: #831843;
            --text-secondary: #9d174d;
            --text-muted: #be185d;
            --border-color: #f9a8d4;
            --shadow-color: rgba(0, 0, 0, 0.05);
            --popover-bg: #ffffff;
            --popover-border: #fbcfe8;
            --popover-shadow: rgba(0, 0, 0, 0.05);
            --popover-text: #9d174d;
            --popover-hover-bg: #fce7f3;
            --popover-disabled-text: #fda4af;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-primary);
            color: var(--text-primary);
            transition: background-color 0.3s, color 0.3s;
        }

        .bg-primary { background-color: var(--bg-primary); }
        .bg-secondary { background-color: var(--bg-secondary); }
        .bg-accent { background-color: var(--bg-accent); }
        #auth-modal > div { background-color: var(--bg-modal); }
        .text-primary { color: var(--text-primary); }
        .text-secondary { color: var(--text-secondary); }
        .text-muted { color: var(--text-muted); }
        .border-color { border-color: var(--border-color); }
        .shadow-dynamic { box-shadow: 0 10px 15px -3px var(--shadow-color), 0 4px 6px -2px var(--shadow-color); }

        .hero-section { 
            position: relative; 
            height: 80vh; 
            overflow: hidden; 
            background-image: url('https://images.unsplash.com/photo-1597733336794-12d05021d510?q=80&w=1974&auto=format&fit=crop');
            background-size: cover;
            background-position: center;
        }
        .hero-overlay { position: absolute; top: 0; left: 0; right: 0; bottom: 0; background-color: rgba(17, 24, 39, 0.6); z-index: 1; }
        .hero-content { position: relative; z-index: 2; }

        .cta-button { transition: all 0.3s ease; }
        .cta-button:hover { transform: translateY(-2px); box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1); }

        .feature-card, .testimonial-card, .course-container, #contact form {
            background-color: var(--bg-secondary);
            border: 1px solid var(--border-color);
        }
        .chapter-card {
            background-color: #bec6c3;
            border: 1px solid var(--border-color);
        }
        .chapter-card:hover, .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px var(--shadow-color), 0 4px 6px -2px var(--shadow-color);
        }

        .chapter-details, .course-chapters-container, .feature-details { max-height: 0; overflow: hidden; transition: max-height 0.5s ease-in-out; }
        
        .course-toggle-btn .fa-chevron-down, .feature-card .toggle-icon, .chapter-card .toggle-icon, #theme-switcher-btn .fa-chevron-down { transition: transform 0.3s ease; }
        .course-toggle-btn.open .fa-chevron-down, .feature-card.open .toggle-icon, .chapter-card.open .toggle-icon, #theme-switcher-btn.open .fa-chevron-down { transform: rotate(180deg); }

        .like-dislike-btn { cursor: pointer; transition: transform 0.2s, color 0.2s; }
        .like-dislike-btn.voted { color: #4f46e5; }
        .like-dislike-btn.disabled { cursor: not-allowed; opacity: 0.5; }

        .feature-card, .chapter-card { cursor: pointer; }
        input, textarea { background-color: var(--bg-input); border: 1px solid var(--border-color); color: var(--text-primary); }

        /* Popover Styles */
        .chapter-resources-popover {
            display: none;
            position: absolute;
            bottom: 100%; /* Position above the button */
            left: 50%;
            transform: translateX(-50%) translateY(-10px); /* Center and add margin */
            z-index: 10;
            background-color: var(--popover-bg);
            border: 1px solid var(--popover-border);
            border-radius: 0.5rem; /* rounded-lg */
            box-shadow: 0 4px 6px -1px var(--popover-shadow), 0 2px 4px -1px var(--popover-shadow); /* shadow-md */
            width: 160px; /* w-40 */
            padding-top: 0.5rem; /* py-2 */
            padding-bottom: 0.5rem;
        }
        .chapter-resources-popover.open {
            display: block;
        }
        .popover-item {
            display: flex;
            align-items: center;
            width: 100%;
            padding: 0.5rem 1rem; /* px-4 py-2 */
            font-size: 0.875rem; /* text-sm */
            color: var(--popover-text);
            text-align: left;
            background: none;
            border: none;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .popover-item:hover:not(:disabled) {
            background-color: var(--popover-hover-bg);
        }
        .popover-item:disabled {
            color: var(--popover-disabled-text);
            cursor: not-allowed;
            opacity: 0.7;
        }
        .popover-item i {
            margin-right: 0.75rem; /* mr-3 */
            width: 1rem; /* Adjust icon width if needed */
        }


    </style>
</head>
<body class="bg-primary">

    <!-- Header -->
    <header class="bg-gradient-to-r from-blue-800 to-indigo-600 text-white shadow-md sticky top-0 z-50">
        <nav class="container mx-auto px-6 py-6 flex justify-between items-center">
            <a href="#" class="text-xl font-bold text-white">
                <i class="fas fa-brain text-indigo-300"></i> Digital School-LMS
            </a>
            <div class="hidden md:flex items-center space-x-6 text-sm">
                <a href="#courses" class="nav-link">Courses</a>
                <a href="#about" class="nav-link">About</a>
                <a href="#testimonials" class="nav-link">Testimonials</a>
                <a href="#contact" class="nav-link">Contact Us</a>
                <button data-action="open-auth" class="get-started-btn bg-gray-100 text-blue-800 px-4 py-2 rounded-lg cta-button font-semibold">Get Started</button>
                 <div class="relative">
                    <button id="theme-switcher-btn" data-action="toggle-theme" class="text-white hover:text-gray-200 flex items-center gap-2" aria-label="Theme switcher" aria-expanded="false">
                        <i class="fas fa-palette text-lg"></i>
                        <i class="fas fa-chevron-down text-xs ml-1"></i>
                    </button>
                    <div id="theme-options" class="hidden absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-xl py-2 z-10 border border-gray-200">
                         <button data-theme="light" data-action="set-theme" class="theme-option-btn flex items-center w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"><div class="w-4 h-4 rounded-full bg-white border border-gray-300 mr-3"></div>White</button>
                         <button data-theme="light-gray" data-action="set-theme" class="theme-option-btn flex items-center w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"><div class="w-4 h-4 rounded-full bg-gray-200 mr-3"></div>Light Gray</button>
                         <button data-theme="dark" data-action="set-theme" class="theme-option-btn flex items-center w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"><div class="w-4 h-4 rounded-full bg-black mr-3"></div>Dark</button>
                         <button data-theme="gray" data-action="set-theme" class="theme-option-btn flex items-center w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"><div class="w-4 h-4 rounded-full bg-gray-700 mr-3"></div>Gray</button>
                         <button data-theme="light-dark" data-action="set-theme" class="theme-option-btn flex items-center w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"><div class="w-4 h-4 rounded-full bg-gray-800 mr-3"></div>Light Dark</button>
                         <button data-theme="magenta" data-action="set-theme" class="theme-option-btn flex items-center w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"><div class="w-4 h-4 rounded-full bg-pink-600 mr-3"></div>Magenta</button>
                    </div>
                </div>
            </div>
            <button id="mobile-menu-button" class="md:hidden text-white" aria-label="Open menu" aria-expanded="false" aria-controls="mobile-menu">
                <i class="fas fa-bars text-2xl"></i>
            </button>
        </nav>
        <div id="mobile-menu" class="hidden md:hidden bg-blue-800 py-4 max-h-[calc(100vh-4rem)] overflow-y-auto">
             <a href="#courses" class="nav-link-mobile block py-2 px-4 text-sm text-gray-200 hover:bg-blue-700">Courses</a>
             <a href="#about" class="nav-link-mobile block py-2 px-4 text-sm text-gray-200 hover:bg-blue-700">About</a>
             <a href="#testimonials" class="nav-link-mobile block py-2 px-4 text-sm text-gray-200 hover:bg-blue-700">Testimonials</a>
             <a href="#contact" class="nav-link-mobile block py-2 px-4 text-sm text-gray-200 hover:bg-blue-700">Contact Us</a>
             <div class="border-t border-blue-700 my-2"></div>
             <button class="get-started-btn block w-full text-left py-2 px-4 text-sm text-gray-200 hover:bg-blue-700" data-action="open-auth">Join Us</button>
        </div>
    </header>

    <main>
        <section class="hero-section text-white">
            <div class="hero-overlay"></div>
            <div class="container mx-auto px-6 h-full flex flex-col justify-center items-center text-center hero-content">
                <h1 class="text-2xl md:text-4xl font-extrabold leading-tight italic" style="font-family: Times, 'Times New Roman', serif;">Discover, Design, and Dominate the Digital Age</h1>
                <p class="mt-4 text-sm md:text-base text-gray-300 max-w-3xl mx-auto italic" style="font-family: Times, 'Times New Roman', serif;">Join our expert-led online courses and master the skills to build the future of technology.</p>
                <a href="#courses" class="nav-link mt-8 inline-block bg-indigo-600 text-white px-8 py-4 rounded-lg text-base font-semibold cta-button">Explore Courses</a>
            </div>
        </section>

        <section id="courses" class="py-20 bg-primary">
            <div class="container mx-auto px-6">
                <h2 class="text-2xl md:text-3xl font-bold text-center text-primary mb-12">Our Courses</h2>
                <div id="courses-accordion" class="space-y-8">
                    <!-- Course Accordions will be populated by JS -->
                </div>
            </div>
        </section>

        <section id="about" class="py-20 bg-secondary">
            <div class="container mx-auto px-6">
                 <div class="flex flex-col md:flex-row items-center">
                    <div class="md:w-1/2">
                        <h2 class="text-2xl md:text-3xl font-bold text-primary mb-4">About Digital School-LMS</h2>
                        <p class="text-secondary mb-6">

Digital School-LMS is a modern, responsive, and fully interactive Learning Management System (LMS) HTML website template designed for educational institutions, online academies, training centers, and e-learning startups.
Built with clean, well-structured code and a sleek user interface, it delivers a smooth experience for both instructors and learners.

The template features a dynamic color theme switcher, allowing users to personalize their viewing experience. Its elegant multi-page structure includes dedicated sections for Courses, About, Testimonials, and Contact Us, all accessible from a stylish fixed header with integrated Sign In and Sign Up buttons for quick authentication flow.

The Courses page is the heart of the site — offering options to view, upload, or download PDF materials, and embed unlimited YouTube videos and images. Each course listing is designed to be interactive, visually appealing, and easy to navigate.

Whether you’re launching an online school, professional training platform, or academic website, Digital School-LMS provides a robust front-end foundation that’s ready for backend integration or direct deployment.

 <h1>Key Features</h1>

<li> Fully responsive and mobile-friendly layout</li>
<li>Multiple theme color options (live color switcher)</li>
<li>Interactive course modules with video and document integration</li>
<li>User authentication pages: Sign In, Sign Up, and Course-based Login</li>
<li>Modern navigation bar with hover and dropdown effects</li>
<li>SEO-ready clean HTML, CSS, and JS structure</li>
<li>Optimized for performance and cross-browser compatibility
</li>
</p>

  <p class="text-secondary">We believe that by empowering individuals with AI and Python skills, we can drive innovation and solve real-world problems.</p>
                    </div>
                    <div class="md:w-1/2 mt-8 md:mt-0 md:pl-12">
                         <img src="https://images.unsplash.com/photo-1519389950473-47ba0277781c?q=80&w=2070&auto=format&fit=crop" alt="Digital School Team Collaborating" class="rounded-lg shadow-xl">
                    </div>
                </div>
            </div>
        </section>

        <section id="why-us" class="py-20">
            <div class="container mx-auto px-6">
                <h2 class="text-2xl md:text-3xl font-bold text-center text-primary">Why Choose Us?</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mt-12">
                    <div class="feature-card p-6 rounded-lg transition-shadow" role="button" tabindex="0" aria-expanded="false" data-action="toggle-feature">
                        <div class="flex items-center justify-between">
                             <div class="flex items-center"><div class="text-3xl text-indigo-600 mr-4"><i class="fas fa-chalkboard-teacher"></i></div><h3 class="text-lg font-bold text-primary">Expert Instructors</h3></div>
                            <i class="fas fa-chevron-down toggle-icon text-muted"></i>
                        </div>
                        <p class="text-secondary mt-2 text-sm">Learn from industry professionals with real-world experience.</p>
                        <div class="feature-details space-y-4">
                            <div class="mt-4 pt-4 border-t border-color">
                                <h4 class="font-semibold text-primary">Definition</h4>
                                <p class="text-secondary text-sm">An expert instructor is more than a teacher; they are a seasoned practitioner and a skilled educator who brings real-world context and mentorship to the learning experience.</p>
                            </div>
                            <div>
                                <h4 class="font-semibold text-primary">Sub-categories:</h4>
                                <ul class="list-disc list-inside text-secondary text-sm space-y-1 mt-2">
                                    <li><strong>Industry Practitioners:</strong> Our instructors work at leading tech companies, applying AI to solve complex problems daily.</li>
                                    <li><strong>Vetted Educators:</strong> Each instructor undergoes a rigorous vetting process to ensure they can communicate complex ideas with clarity and passion.</li>
                                    <li><strong>Direct Mentorship:</strong> Access instructors through Q&A sessions, office hours, and project feedback to get personalized guidance.</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="feature-card p-6 rounded-lg transition-shadow" role="button" tabindex="0" aria-expanded="false" data-action="toggle-feature">
                         <div class="flex items-center justify-between">
                             <div class="flex items-center"><div class="text-3xl text-indigo-600 mr-4"><i class="fas fa-laptop-code"></i></div><h3 class="text-lg font-bold text-primary">Hands-On Projects</h3></div>
                            <i class="fas fa-chevron-down toggle-icon text-muted"></i>
                        </div>
                        <p class="text-secondary mt-2 text-sm">Apply your knowledge with practical, hands-on projects.</p>
                         <div class="feature-details space-y-4">
                            <div class="mt-4 pt-4 border-t border-color">
                                <h4 class="font-semibold text-primary">Definition</h4>
                                <p class="text-secondary text-sm">Hands-on projects are designed to bridge the gap between theory and practice, allowing you to build tangible, real-world applications and a strong professional portfolio.</p>
                            </div>
                            <div>
                                <h4 class="font-semibold text-primary">Sub-categories:</h4>
                                <ul class="list-disc list-inside text-secondary text-sm space-y-1 mt-2">
                                    <li><strong>Real-World Scenarios:</strong> Each project is based on actual industry problems, from analyzing market data to building computer vision models.</li>
                                    <li><strong>Portfolio-Ready:</strong> The projects you complete are designed to be showcased in your professional portfolio to demonstrate your skills to potential employers.</li>
                                    <li><strong>Guided and Unguided Challenges:</strong> Start with guided projects to build confidence and move on to unguided challenges to foster independent problem-solving.</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="feature-card p-6 rounded-lg transition-shadow" role="button" tabindex="0" aria-expanded="false" data-action="toggle-feature">
                         <div class="flex items-center justify-between">
                             <div class="flex items-center"><div class="text-3xl text-indigo-600 mr-4"><i class="fas fa-users"></i></div><h3 class="text-lg font-bold text-primary">Community Support</h3></div>
                            <i class="fas fa-chevron-down toggle-icon text-muted"></i>
                        </div>
                        <p class="text-secondary mt-2 text-sm">Join a vibrant community of learners and mentors.</p>
                        <div class="feature-details space-y-4">
                             <div class="mt-4 pt-4 border-t border-color">
                                <h4 class="font-semibold text-primary">Definition</h4>
                                <p class="text-secondary text-sm">Community support is a network of peers, mentors, and alumni dedicated to collaborative learning, professional networking, and providing help whenever you need it.</p>
                            </div>
                            <div>
                                <h4 class="font-semibold text-primary">Sub-categories:</h4>
                                <ul class="list-disc list-inside text-secondary text-sm space-y-1 mt-2">
                                    <li><strong>Peer-to-Peer Learning:</strong> Collaborate with fellow students in dedicated forums and project groups to solve problems and share insights.</li>
                                     <li><strong>Alumni Network:</strong> Connect with graduates who are now working in the industry for career advice, mentorship, and networking opportunities.</li>
                                    <li><strong>24/7 Support Channels:</strong> Get help anytime through our dedicated support channels, staffed by technical mentors.</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <section id="testimonials" class="py-20 bg-accent">
            <div class="container mx-auto px-6">
                <h2 class="text-2xl md:text-3xl font-bold text-center text-primary">What Our Students Say</h2>
                <div id="testimonials-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mt-12">
                     <!-- Testimonials will be populated by JS -->
                     <div class="testimonial-card p-6 rounded-lg">
                        <h3 class="text-lg font-bold text-primary mb-4">Leave a Comment</h3>
                        <form id="comment-form">
                            <div class="mb-4"><label for="comment-name" class="block text-primary text-sm font-bold mb-2">Your Name</label><input type="text" id="comment-name" class="w-full px-3 py-2 rounded-lg focus:outline-none focus:border-indigo-500" placeholder="e.g., Alex Ray" required></div>
                            <div class="mb-4"><label for="comment-text" class="block text-primary text-sm font-bold mb-2">Your Comment</label><textarea id="comment-text" rows="4" class="w-full px-3 py-2 rounded-lg focus:outline-none focus:border-indigo-500" placeholder="Share your experience..." required></textarea></div>
                            <button type="submit" class="w-full bg-indigo-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-indigo-700 cta-button">Post Comment</button>
                        </form>
                    </div>
                </div>
            </div>
        </section>

        <section id="contact" class="py-20 bg-secondary">
            <div class="container mx-auto px-6">
                <h2 class="text-2xl md:text-3xl font-bold text-center text-primary">Contact Us</h2>
                <div class="max-w-xl mx-auto mt-12"><form class="p-8 rounded-lg shadow-dynamic"><div class="mb-4"><label for="name" class="block text-primary font-bold mb-2">Name</label><input type="text" id="name" class="w-full px-3 py-2 rounded-lg focus:outline-none focus:border-indigo-500" placeholder="Your Name"></div><div class="mb-4"><label for="email" class="block text-primary font-bold mb-2">Email</label><input type="email" id="email" class="w-full px-3 py-2 rounded-lg focus:outline-none focus:border-indigo-500" placeholder="Your Email"></div><div class="mb-4"><label for="message" class="block text-primary font-bold mb-2">Message</label><textarea id="message" rows="4" class="w-full px-3 py-2 rounded-lg focus:outline-none focus:border-indigo-500" placeholder="Your Message"></textarea></div><div class="text-center"><button type="submit" class="bg-indigo-600 text-white px-6 py-3 rounded-lg font-semibold cta-button">Send Message</button></div></form></div>
            </div>
        </section>
    </main>

    <footer class="bg-gray-800 text-white py-12">
        <div class="container mx-auto px-6 text-center">
            <p>&copy; 2024 Digital School. All Rights Reserved.</p>
            <div class="flex justify-center space-x-4 mt-4">
                <a href="#" class="text-gray-400 hover:text-white"><i class="fab fa-facebook-f"></i></a>
                <a href="#" class="text-gray-400 hover:text-white"><i class="fab fa-twitter"></i></a>
                <a href="#" class="text-gray-400 hover:text-white"><i class="fab fa-linkedin-in"></i></a>
            </div>
        </div>
    </footer>
    
    <!-- Auth Modal -->
    <div id="auth-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
        <div class="bg-modal p-8 rounded-lg shadow-xl w-full max-w-md">
            <div class="flex justify-end">
                <button data-action="close-auth" class="text-muted hover:text-primary text-2xl">&times;</button>
            </div>
            <div class="mb-6">
                <div class="flex border-b border-color">
                    <button id="signin-tab" data-action="show-signin" class="py-2 px-4 font-semibold text-muted w-1/2">Sign In</button>
                    <button id="signup-tab" data-action="show-signup" class="py-2 px-4 font-semibold text-muted w-1/2">Sign Up</button>
                </div>
            </div>
            <!-- Sign In Form -->
            <form id="signin-form">
                <div class="mb-4"><label for="signin-email" class="block text-primary text-sm font-bold mb-2">Email</label><input type="email" id="signin-email" class="w-full px-3 py-2 rounded-lg focus:outline-none focus:border-indigo-500" required></div>
                <div class="mb-6"><label for="signin-password" class="block text-primary text-sm font-bold mb-2">Password</label><input type="password" id="signin-password" class="w-full px-3 py-2 rounded-lg focus:outline-none focus:border-indigo-500" required></div>
                <button type="submit" class="w-full bg-indigo-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-indigo-700 cta-button">Sign In</button>
            </form>
            <!-- Sign Up Form -->
            <form id="signup-form" class="hidden">
                <div class="mb-4"><label for="signup-name" class="block text-primary text-sm font-bold mb-2">Name</label><input type="text" id="signup-name" class="w-full px-3 py-2 rounded-lg focus:outline-none focus:border-indigo-500" required></div>
                <div class="mb-4"><label for="signup-email" class="block text-primary text-sm font-bold mb-2">Email</label><input type="email" id="signup-email" class="w-full px-3 py-2 rounded-lg focus:outline-none focus:border-indigo-500" required></div>
                <div class="mb-6"><label for="signup-password" class="block text-primary text-sm font-bold mb-2">Password</label><input type="password" id="signup-password" class="w-full px-3 py-2 rounded-lg focus:outline-none focus:border-indigo-500" required></div>
                <button type="submit" class="w-full bg-indigo-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-indigo-700 cta-button">Sign Up</button>
            </form>
        </div>
    </div>
    
    <!-- Module Viewer Modal -->
    <div id="module-viewer-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
        <div class="bg-secondary p-8 rounded-lg shadow-xl w-11/12 md:w-1/2 max-w-2xl max-h-[90vh] flex flex-col">
            <div class="flex justify-between items-center mb-4 border-b border-color pb-4">
                <h3 id="modal-title" class="text-2xl font-bold text-primary">Attached Files</h3>
                <button data-action="close-viewer" class="text-primary hover:text-red-500 text-2xl">&times;</button>
            </div>
            <div id="modal-file-list" class="space-y-3 overflow-y-auto">
                <!-- File links will be injected here -->
            </div>
        </div>
    </div>

    <!-- Video Viewer Modal -->
    <div id="video-viewer-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
        <div class="bg-secondary p-8 rounded-lg shadow-xl w-11/12 max-w-4xl max-h-[90vh] flex flex-col">
            <div class="flex justify-between items-center mb-4 border-b border-color pb-4">
                <h3 class="text-2xl font-bold text-primary">Video Lecture</h3>
                <button data-action="close-video-viewer" class="text-primary hover:text-red-500 text-2xl">&times;</button>
            </div>
            <div class="aspect-video">
                <video id="modal-video-player" width="100%" controls>
                    <source id="modal-video-source" src="" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
             // --- Global Data Store ---
            let isUserLoggedIn = false; // Login state
            const chapterFiles = {};
            const chapterVideos = {}; // Store for uploaded videos
            const testimonials = [
                { name: 'John Doe', role: 'Software Engineer', text: "The Machine Learning course was fantastic! The instructor explained complex topics in a simple way.", likes: 12, dislikes: 1, avatar: 'e0e7ff/4338ca?text=JD' },
                { name: 'Jane Smith', role: 'Data Analyst', text: "I highly recommend AI Scholars. The hands-on projects helped me build a strong portfolio.", likes: 25, dislikes: 0, avatar: 'c7d2fe/4338ca?text=JS' },
                { name: 'Mike Brown', role: 'Student', text: "The community is very supportive. I learned a lot from my peers and mentors.", likes: 18, dislikes: 2, avatar: 'a5b4fc/4338ca?text=MB' }
            ];
            const avatarColors = ['#ef4444', '#f97316', '#84cc16', '#22c55e', '#06b6d4', '#6366f1', '#d946ef'];

            // --- UI Element References ---
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            const coursesAccordion = document.getElementById('courses-accordion');
            const testimonialsGrid = document.getElementById('testimonials-grid');
            const commentForm = document.getElementById('comment-form');
            const authModal = document.getElementById('auth-modal');
            const moduleViewerModal = document.getElementById('module-viewer-modal');
            const videoViewerModal = document.getElementById('video-viewer-modal'); // Video modal ref
            const themeSwitcherBtn = document.getElementById('theme-switcher-btn');
            const themeOptions = document.getElementById('theme-options');
            const signinForm = document.getElementById('signin-form');
            const signupForm = document.getElementById('signup-form');
            const signinTab = document.getElementById('signin-tab');
            const signupTab = document.getElementById('signup-tab');


            // --- Course Data ---
            const courseData = {
                ai: {
                    courseId: 'ai',
                    title: 'A Comprehensive Course on Artificial Intelligence',
                    icon: 'fa-brain',
                    chapters: [
                        { chapter: 1, title: 'What is Artificial Intelligence?', description: 'Defining AI through the Turing Test and Chinese Room Argument, and exploring its history from Dartmouth to Deep Learning and its presence in everyday life.', details: `Artificial Intelligence (AI) is a vast and interdisciplinary field of computer science focused on creating systems or machines capable of performing tasks that typically require human intelligence. These tasks include learning, reasoning, problem-solving, perception, language understanding, and decision-making.<br><br>Below is a deep, structured, and comprehensive breakdown of AI from foundational principles to modern applications and ethical implications.`},
                        { chapter: 2, title: 'The Philosophy and Ethics of AI', description: 'Examining the profound questions of AI consciousness, the sources and mitigation of bias, and the ethical frameworks needed for responsible AI.', details: 'Delve into the ethical maze of AI. We will discuss consciousness, the critical issue of bias in algorithms, and how society can prepare for the future of work alongside intelligent systems.' },
                        { chapter: 3, title: 'Introduction to Machine Learning', description: 'Learn what machine learning is, its different types (supervised, unsupervised, reinforcement), and the complete ML workflow from data to evaluation.', details: 'This chapter lays the groundwork for all of machine learning, introducing the fundamental concepts and the structured process that takes an idea from raw data to a functional model.' },
                        { chapter: 4, title: 'Supervised Learning', description: 'Master regression and classification techniques, from Linear Regression and SVMs to Decision Trees, and learn how to evaluate their performance.', details: 'A deep dive into supervised learning where you will build models that predict outcomes. We cover key algorithms and the metrics like accuracy, precision, and recall used to measure success.' },
                        { chapter: 5, 'title': 'Unsupervised Learning', description: 'Discover patterns in data using clustering (K-Means), dimensionality reduction (PCA), and association rule learning (Apriori).', details: 'Explore the world of unsupervised learning to find hidden structures in unlabeled data. This chapter focuses on grouping data points, reducing complexity, and finding relationships.' },
                        { chapter: 6, title: 'Essential Mathematics and Tools for AI', description: 'Grasp the essential math concepts and programming tools that are the bedrock of AI, including Linear Algebra, Calculus, and key Python libraries.', details: 'This chapter equips you with the fundamental toolkit for any AI practitioner, covering the necessary linear algebra, calculus, probability, and hands-on introductions to Python, NumPy, Pandas, and Scikit-learn.' },
                        { chapter: 7, title: 'Introduction to Neural Networks', description: 'Compare biological neurons to artificial perceptrons and build your first simple neural network, understanding activation functions like Sigmoid and ReLU.', details: 'Begin your journey into deep learning by understanding its fundamental building block: the neuron. Learn how simple units combine to create powerful predictive models.' },
                         { chapter: 8, title: 'Projects, Dynamic Resume & Portfolio', description: 'Apply your skills to build real-world projects and learn how to create a dynamic, professional resume and portfolio to showcase your abilities.', details: 'This chapter focuses on practical application. You will work on capstone projects integrating various AI techniques. Learn best practices for creating a standout resume and an online portfolio that dynamically updates to reflect your latest work and skills.' }
                    ]
                },
                webdev: {
                    courseId: 'webdev',
                    title: 'Web Development',
                    icon: 'fa-laptop-code',
                    chapters: [
                        { chapter: 1, title: 'HTML Fundamentals', description: 'Learn the foundational markup language for building web pages. Understand tags, elements, and document structure.', details: 'HTML (HyperText Markup Language) is the skeleton of every webpage. In this module, you will learn to structure content, including headings, paragraphs, lists, links, images, and forms. We will also cover semantic HTML5 elements for building accessible and SEO-friendly sites.'},
                        { chapter: 2, title: 'CSS Styling', description: 'Discover how to add style to your websites. Learn about selectors, properties, the box model, and layouts.', details: 'CSS (Cascading Style Sheets) brings your HTML to life. We will dive deep into styling, covering colors, fonts, and spacing. You will master modern layout techniques like Flexbox and CSS Grid, and learn how to build responsive designs that look great on any device.'},
                        { chapter: 3, title: 'JavaScript Essentials', description: 'Master the core programming language of the web. Learn variables, data types, functions, and control flow.', details: 'JavaScript is the engine that powers dynamic web applications. This module covers the fundamentals, including variables, operators, functions, loops, and conditional logic. You will learn how to manipulate the DOM to make your pages interactive.'},
                        { chapter: 4, title: 'DOM Manipulation', description: 'Learn how to use JavaScript to dynamically change your HTML and CSS, responding to user events.', details: 'The Document Object Model (DOM) is the API for your webpage. Learn to select elements, change their content and styles, and listen for user events like clicks and keypresses to create a fully interactive experience.'},
                        { chapter: 5, title: 'Asynchronous JavaScript (AJAX)', description: 'Understand asynchronous code, callbacks, Promises, and async/await. Learn to fetch data from external APIs.', details: 'Modern web applications rely on fetching data from servers without a page reload. This chapter covers the concepts of asynchronous programming and the Fetch API, allowing you to load data, post content, and work with third-party services.'},
                        { chapter: 6, title: 'Introduction to React.js', description: 'Get started with the most popular JavaScript library for building user interfaces. Learn about components, state, and props.', details: 'React.js allows you to build complex, high-performance user interfaces using a component-based architecture. You will learn the basics of JSX, how to manage component state, handle events, and build a simple single-page application (SPA).'},
                        { chapter: 7, title: 'Full-Stack Concepts', description: 'An overview of what happens on the backend. Understand clients, servers, databases, and APIs.', details: 'This chapter provides a high-level overview of the full stack, explaining how the frontend you build communicates with a backend server, how data is stored in a database, and how APIs act as the bridge between them.'},
                         { chapter: 8, title: 'Projects, Dynamic Resume & Portfolio', description: 'Apply your skills to build real-world web applications and learn how to create a dynamic, professional resume and portfolio to showcase your abilities.', details: 'This chapter focuses on practical application. You will work on capstone projects integrating various web development techniques. Learn best practices for creating a standout resume and an online portfolio that dynamically updates to reflect your latest work and skills.' }
                    ]
                },
                bootcamp: {
                    courseId: 'bootcamp',
                    title: 'Web Development Bootcamp',
                    icon: 'fa-rocket',
                    chapters: [
                        { chapter: 1, title: 'HTML: The Structure of the Web', description: 'Learn the foundational markup language of all websites. Understand tags, elements, and document structure.', details: 'HTML (HyperText Markup Language) is the skeleton of every webpage. In this module, you will learn to structure content, including headings, paragraphs, lists, links, images, and forms. We will also cover semantic HTML5 elements for building accessible and SEO-friendly sites.'},
                        { chapter: 2, title: 'CSS: Styling the Web', description: 'Discover how to add style to your websites. Learn about selectors, properties, the box model, and layouts.', details: 'CSS (Cascading Style Sheets) brings your HTML to life. We will dive deep into styling, covering colors, fonts, and spacing. You will master modern layout techniques like Flexbox and CSS Grid, and learn how to build responsive designs that look great on any device.'},
                        { chapter: 3, title: 'JavaScript: Making Websites Interactive', description: 'Master the core programming language of the web. Learn variables, data types, functions, and control flow.', details: 'JavaScript is the engine that powers dynamic web applications. This module covers the fundamentals, including variables, operators, functions, loops, and conditional logic. You will learn how to manipulate the DOM to make your pages interactive.'},
                        { chapter:4, title: 'React.js: Building Modern UI', description: 'Introduction to the most popular JavaScript library for building user interfaces. Learn about components, state, and props.', details: 'React.js allows you to build complex, high-performance user interfaces using a component-based architecture. You will learn the basics of JSX, how to manage component state, handle events, and fetch data from APIs to build a complete single-page application (SPA).'},
                        // Add filler chapters if needed to reach 7/8
                        { chapter: 5, title: 'State Management in React', description: 'Explore techniques for managing complex application state.', details: 'Learn about React Context, Redux, and Zustand for effective state management in larger React applications.' },
                        { chapter: 6, title: 'Backend Integration with Node.js', description: 'Connect your React frontend to a simple Node.js backend.', details: 'Learn the basics of Node.js and Express to build a simple API for your React application.' },
                        { chapter: 7, title: 'Deployment and DevOps Basics', description: 'Learn how to deploy your web application to the cloud.', details: 'Understand the basics of deploying web applications using platforms like Vercel or Netlify, and an introduction to CI/CD concepts.' },
                        { chapter: 8, title: 'Projects, Dynamic Resume & Portfolio', description: 'Build a full-stack project and create a dynamic resume/portfolio.', details: 'This capstone chapter involves building a complete web application and learning how to effectively showcase your skills and projects to potential employers through a professional online presence.' }
                    ]
                },
                python: {
                    courseId: 'python',
                    title: 'Essential Python for AI & Data Science',
                    icon: 'fab fa-python',
                    chapters: [
                        { chapter: 1, title: 'Introduction to Python', description: 'Get started with the most popular language for AI and Data Science. Learn about its history, philosophy, and why it\'s the perfect tool for developers.', details: `Python is a high-level, interpreted, general-purpose programming language known for its simplicity, readability, and flexibility. It was created by Guido van Rossum and released in 1991. Python supports multiple programming paradigms, including procedural, object-oriented, and functional programming.` },
                        { chapter: 2, title: 'Variables, Data Types, and Operators', description: 'Learn the building blocks of Python programming, including how to store data in variables, the different types of data, and how to perform operations.', details: 'This chapter covers integer, float, string, and boolean data types, as well as arithmetic, comparison, and logical operators.' },
                        { chapter: 3, title: 'Control Flow: Conditionals and Loops', description: 'Master the logic of your programs with if-elif-else statements for decision making and for/while loops for repetitive tasks.', details: 'This chapter is crucial for creating dynamic programs. You will learn to control the flow of execution based on specific conditions and to iterate over data efficiently.' },
                        { chapter: 4, title: 'Functions and Modules', description: 'Learn to write clean, reusable code with functions, and how to organize your projects with modules and packages.', details: 'Discover how to define your own functions to perform specific tasks and how to import and use Python\'s vast collection of built-in and third-party modules.' },
                        { chapter: 5, title: 'Data Structures: Lists, Tuples, Dictionaries', description: 'Dive into Python\'s core data structures for organizing and manipulating collections of data effectively.', details: 'This chapter explores mutable lists, immutable tuples, and key-value pairs in dictionaries, which are essential for any data-driven application.' },
                        { chapter: 6, title: 'File I/O', description: 'Learn how to read from and write to files on your computer, a fundamental skill for data persistence and processing.', details: 'We will cover opening files, reading line by line, writing data, and properly closing file resources to ensure your data is handled safely.' },
                        { chapter: 7, title: 'Introduction to Object-Oriented Programming (OOP)', description: 'Understand the principles of OOP by creating your own classes and objects.', details: 'This chapter introduces the concepts of classes, objects, attributes, and methods, laying the foundation for building complex, modular, and scalable applications.' },
                        { chapter: 8, title: 'Projects, Dynamic Resume & Portfolio', description: 'Apply your Python skills to build practical projects and learn how to create a dynamic, professional resume and portfolio.', details: 'This chapter focuses on practical application using Python. You will work on projects like data analysis scripts or simple web apps. Learn best practices for creating a standout resume and an online portfolio that dynamically showcases your Python projects and skills.' }
                    ]
                }
            };
            
            // --- UI Rendering Functions ---
             function createChapterCard(chapter, courseId) {
                const uniqueId = `${courseId}-details-${chapter.chapter}`;
                const fileUploadId = `file-upload-${uniqueId}`;
                const videoUploadId = `video-upload-${uniqueId}`;
                return `
                    <div class="chapter-card rounded-lg p-6 flex flex-col min-h-[20rem]" data-chapter-id="${uniqueId}"> 
                        <div class="chapter-header flex-grow cursor-pointer" data-action="toggle-chapter">
                            <div class="flex justify-between items-start mb-3">
                                <h4 class="text-lg font-bold text-primary pr-4">Chapter ${chapter.chapter}: ${chapter.title}</h4>
                                <i class="fas fa-chevron-down toggle-icon text-muted"></i>
                            </div>
                            <div class="chapter-details space-y-3">
                                <p class="text-secondary text-sm">${chapter.description}</p>
                                <p class="text-secondary text-sm" data-action="render-markdown">${chapter.details}</p>
                            </div>
                        </div>
                        <div class="mt-auto pt-4 border-t border-color relative">
                             <div class="flex justify-between items-center mt-4">
                                <div>
                                    <span class="file-name-display text-xs text-muted block truncate"></span>
                                    <span class="video-name-display text-xs text-green-600 mt-1 block truncate"></span>
                                </div>
                                <button class="resources-btn px-3 py-2 rounded-lg text-sm font-semibold transition-colors bg-gray-200 text-gray-700 hover:bg-gray-300" data-action="toggle-resources">
                                    <i class="fas fa-folder mr-1"></i> Resources
                                </button>
                             </div>
                             <!-- Popover Menu -->
                             <div class="chapter-resources-popover">
                                <button class="popover-item" data-action="attach-files">
                                    <i class="fas fa-paperclip"></i> Attach Files
                                </button>
                                <button class="popover-item" data-action="upload-video">
                                    <i class="fas fa-video"></i> Upload Video
                                </button>
                                <button class="popover-item view-module-btn" data-action="view-module" data-mode="view" disabled>
                                    <i class="fas fa-eye"></i> View Module
                                </button>
                                <button class="popover-item download-module-btn" data-action="view-module" data-mode="download" disabled>
                                    <i class="fas fa-download"></i> Down Load
                                </button>
                                <button class="popover-item view-video-btn" data-action="view-video" disabled>
                                    <i class="fas fa-play"></i> View Video
                                </button>
                            </div>
                            <!-- Hidden file inputs -->
                            <input type="file" id="${fileUploadId}" class="file-input hidden" multiple>
                            <input type="file" id="${videoUploadId}" class="video-input hidden" accept="video/*">
                        </div>
                    </div>`;
            }

            function renderCourses() {
                const courseOrder = ['ai', 'webdev', 'bootcamp', 'python'];
                courseOrder.forEach(courseKey => {
                    const course = courseData[courseKey];
                    if (!course) return; // Skip if course data is missing
                    
                    const courseEl = document.createElement('div');
                    courseEl.className = 'main-course-container bg-secondary rounded-lg shadow-sm border border-color';
                    courseEl.innerHTML = `
                        <button class="course-toggle-btn w-full text-left p-6 hover:bg-accent focus:outline-none" data-action="toggle-course" aria-expanded="false" aria-controls="${course.courseId}-chapters">
                            <div class="flex justify-between items-center">
                                <h3 class="text-xl font-bold text-primary flex items-center"><i class="fas ${course.icon} text-indigo-600 mr-4"></i>${course.title}</h3>
                                <i class="fas fa-chevron-down text-muted"></i>
                            </div>
                        </button>
                        <div class="course-chapters-container" id="${course.courseId}-chapters">
                            <div class="p-6 pt-0">
                                <div class="border-t border-color my-4"></div>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                                    ${course.chapters.map(c => createChapterCard(c, course.courseId)).join('')}
                                </div>
                            </div>
                        </div>
                    `;
                    coursesAccordion.appendChild(courseEl);
                });

                // Render Markdown for chapter details
                document.querySelectorAll('[data-action="render-markdown"]').forEach(el => {
                    el.innerHTML = marked.parse(el.textContent || '');
                });
            }
            
            function createTestimonialCard({name, text, role, avatar, likes, dislikes}) {
                const card = document.createElement('div');
                card.className = 'testimonial-card p-6 rounded-lg';
                card.innerHTML = `
                    <p class="text-secondary mb-4">"${text}"</p>
                    <div class="flex items-center">
                        <div class="w-12 h-12 rounded-full bg-indigo-100 text-indigo-600 flex items-center justify-center mr-4 text-xl flex-shrink-0">
                            <i class="fas fa-user"></i>
                        </div>
                        <div><p class="font-bold text-primary">${name}</p><p class="text-sm text-muted">${role}</p></div>
                    </div>
                    <div class="flex justify-end gap-4 mt-4 text-muted" data-vote-state="none">
                        <div class="flex items-center gap-1"><i class="fas fa-thumbs-up like-dislike-btn" data-action="like"></i><span class="like-count">${likes}</span></div>
                        <div class="flex items-center gap-1"><i class="fas fa-thumbs-down like-dislike-btn" data-action="dislike"></i><span class="dislike-count">${dislikes}</span></div>
                    </div>`;
                return card;
            }

            function renderTestimonials() {
                testimonialsGrid.querySelectorAll('.testimonial-card:not(:last-child)').forEach(el => el.remove());
                const commentFormCard = testimonialsGrid.querySelector('.testimonial-card');
                testimonials.forEach(t => testimonialsGrid.insertBefore(createTestimonialCard(t), commentFormCard));
            }
            
            function updateFileList(chapterId, action, mode = 'view') {
                const files = chapterFiles[chapterId];
                const modalFileList = document.getElementById('modal-file-list');
                const modalTitle = document.getElementById('modal-title');
                
                modalTitle.textContent = mode === 'view' ? 'View Attached Files' : 'Download Attached Files';
                modalFileList.innerHTML = '';

                if (files && files.length > 0) {
                    files.forEach((file, index) => {
                        const fileUrl = URL.createObjectURL(file);
                        const listItem = document.createElement('div');
                        listItem.className = 'flex justify-between items-center p-3 bg-accent rounded-md';
                        listItem.innerHTML = `
                            <a href="${fileUrl}" target="_blank" class="text-primary hover:text-indigo-700 truncate" ${mode === 'download' ? `download="${file.customName || file.name}"` : ''}>
                                <span class="file-name" data-index="${index}">${file.customName || file.name}</span>
                            </a>
                            <button class="rename-file-btn text-muted hover:text-primary" data-index="${index}" data-action="rename-file">
                                <i class="fas fa-pencil-alt text-xs"></i>
                            </button>
                        `;
                        modalFileList.appendChild(listItem);
                    });
                } else {
                    modalFileList.innerHTML = `<p class="text-muted">No files attached.</p>`;
                }
                
                if (action === 'open') {
                    moduleViewerModal.classList.remove('hidden');
                }
            }
            
            function handleModalFileListClick(e) {
                const target = e.target;
                const renameBtn = target.closest('[data-action="rename-file"]');
                
                if (renameBtn) {
                    const index = renameBtn.dataset.index;
                    const chapterId = document.querySelector('.chapter-card.modal-source').dataset.chapterId;
                    const fileNameSpan = renameBtn.closest('.flex').querySelector('.file-name');
                    const currentName = fileNameSpan.textContent;
                    
                    const input = document.createElement('input');
                    input.type = 'text';
                    input.value = currentName;
                    input.className = 'w-full p-1 bg-input border border-color rounded';
                    
                    // Replace the anchor tag content, keep the anchor
                    const anchorTag = fileNameSpan.parentElement;
                    anchorTag.innerHTML = ''; // Clear existing content
                    anchorTag.appendChild(input); // Append input
                    
                    input.focus();
                    
                    const saveName = () => {
                        const newName = input.value.trim();
                        if (newName && newName !== currentName) {
                            chapterFiles[chapterId][index].customName = newName;
                        }
                        // Re-render the modal list
                        const mode = document.getElementById('modal-title').textContent.includes('Download') ? 'download' : 'view';
                        updateFileList(chapterId, 'update', mode);
                    };
                    
                    input.addEventListener('blur', saveName);
                    input.addEventListener('keydown', e => {
                        if (e.key === 'Enter') input.blur();
                        if (e.key === 'Escape') { input.value = currentName; input.blur(); }
                    });
                }
            }


            // --- Event Handler Functions ---
            function toggleAccordion(element, container) {
                const isOpening = !element.classList.contains('open');
                element.classList.toggle('open', isOpening);
                element.setAttribute('aria-expanded', isOpening);
                container.style.maxHeight = isOpening ? `${container.scrollHeight}px` : '0px';
            }

            function setAuthModalTab(isSignin) {
                if (signinTab) {
                    signinTab.classList.toggle('text-indigo-600', isSignin);
                    signinTab.classList.toggle('border-indigo-600', isSignin);
                    signinTab.classList.toggle('text-muted', !isSignin);
                }
                if (signupTab) {
                    signupTab.classList.toggle('text-indigo-600', !isSignin);
                    signupTab.classList.toggle('border-indigo-600', !isSignin);
                    signupTab.classList.toggle('text-muted', isSignin);
                }
                if (signinForm) signinForm.classList.toggle('hidden', !isSignin);
                if (signupForm) signupForm.classList.toggle('hidden', isSignin);
            }

            function handleGlobalClick(e) {
                const target = e.target;
                const actionElement = target.closest('[data-action]');
                const action = actionElement?.dataset.action;
                const chapterCard = target.closest('.chapter-card');
                const chapterId = chapterCard?.dataset.chapterId;

                switch (action) {
                    case 'open-auth':
                        authModal.classList.remove('hidden');
                        if (!mobileMenu.classList.contains('hidden')) mobileMenu.classList.add('hidden');
                        setAuthModalTab(true); // Default to Sign In
                        break;
                    case 'close-auth':
                        authModal.classList.add('hidden');
                        break;
                    case 'show-signin':
                    case 'show-signup':
                        setAuthModalTab(action === 'show-signin');
                        break;
                    case 'close-viewer':
                        moduleViewerModal.classList.add('hidden');
                        document.querySelector('.chapter-card.modal-source')?.classList.remove('modal-source');
                        break;
                    case 'view-module': { // Scoped mode and chapterId
                        const mode = actionElement.dataset.mode;
                        chapterCard.classList.add('modal-source'); // Mark which card opened the modal
                        updateFileList(chapterId, 'open', mode);
                        break;
                    }
                    case 'view-video': { // Scoped vidChapterId
                        const vidChapterId = chapterId; // Use chapterId directly
                        const videoFile = chapterVideos[vidChapterId];
                        if (videoFile) {
                            const videoPlayer = document.getElementById('modal-video-player');
                            const videoSource = document.getElementById('modal-video-source');
                            const videoUrl = URL.createObjectURL(videoFile);
                            
                            videoSource.src = videoUrl;
                            videoSource.type = videoFile.type;
                            videoPlayer.load();
                            videoViewerModal.classList.remove('hidden');
                        }
                        break;
                    }
                    case 'close-video-viewer':
                        const videoPlayer = document.getElementById('modal-video-player');
                        const videoSource = document.getElementById('modal-video-source');
                        if (videoPlayer) videoPlayer.pause();
                        if (videoSource) videoSource.src = ""; // Clear source
                        videoViewerModal.classList.add('hidden');
                        break;
                    case 'toggle-theme':
                        themeOptions.classList.toggle('hidden');
                        break;
                    case 'set-theme':
                        document.documentElement.className = `theme-${actionElement.dataset.theme}`;
                        break;
                    case 'toggle-course':
                        if (isUserLoggedIn) { // Check login state
                            const btn = actionElement; // The button is the element with the action
                            const container = btn.nextElementSibling;
                            const isOpening = !btn.classList.contains('open');
                            document.querySelectorAll('.course-toggle-btn.open').forEach(openBtn => {
                                if (openBtn !== btn) {
                                    openBtn.classList.remove('open');
                                    openBtn.setAttribute('aria-expanded', 'false');
                                    openBtn.nextElementSibling.style.maxHeight = '0px';
                                }
                            });
                            toggleAccordion(btn, container);
                        } else {
                            // User not logged in, open auth modal
                            authModal.classList.remove('hidden');
                            if (!mobileMenu.classList.contains('hidden')) mobileMenu.classList.add('hidden');
                            setAuthModalTab(false); // Default to Sign Up
                        }
                        break;
                    case 'toggle-chapter':
                        const chapterHeader = actionElement; // The header has the action
                        const details = chapterHeader.querySelector('.chapter-details');
                        toggleAccordion(chapterHeader.closest('.chapter-card'), details);
                        break;
                    case 'toggle-feature':
                        const featureCard = actionElement; // The card has the action
                        const featureDetails = featureCard.querySelector('.feature-details');
                        toggleAccordion(featureCard, featureDetails);
                        break;
                    case 'like':
                    case 'dislike':
                        const voteContainer = target.closest('[data-vote-state]');
                        if (voteContainer.dataset.voteState !== 'voted') {
                            const countSelector = action === 'like' ? '.like-count' : '.dislike-count';
                            const count = voteContainer.querySelector(countSelector);
                            count.textContent = parseInt(count.textContent) + 1;
                            voteContainer.dataset.voteState = 'voted';
                            voteContainer.querySelectorAll('.like-dislike-btn').forEach(btn => btn.classList.add('disabled'));
                        }
                        break;
                    case 'toggle-resources': {
                         const popover = chapterCard.querySelector('.chapter-resources-popover');
                         popover.classList.toggle('open');
                        break;
                    }
                    case 'attach-files': {
                        chapterCard.querySelector('.file-input').click();
                        break;
                    }
                    case 'upload-video': {
                         chapterCard.querySelector('.video-input').click();
                        break;
                    }
                    // Rename action is handled in handleModalFileListClick
                }

                // Close theme dropdown if clicking outside
                if (themeSwitcherBtn && !themeSwitcherBtn.contains(target) && themeOptions && !themeOptions.contains(target)) {
                    themeOptions.classList.add('hidden');

                }
                
                // Close resources popover if clicking outside
                document.querySelectorAll('.chapter-resources-popover.open').forEach(popover => {
                     if (!popover.previousElementSibling.contains(target) && !popover.contains(target)) {
                        popover.classList.remove('open');
                    }
                });

                // Close mobile menu if clicking a nav link
                if (target.closest('a.nav-link-mobile')) {
                    e.preventDefault();
                    const targetElement = document.querySelector(target.closest('a.nav-link-mobile').getAttribute('href'));
                    if (targetElement) targetElement.scrollIntoView({ behavior: 'smooth' });
                    mobileMenu.classList.add('hidden');
                }
                
                // Open mobile menu
                if (target.closest('#mobile-menu-button')) {
                    mobileMenu.classList.toggle('hidden');
                }
                
                // Close modal if clicking outside
                if (target === authModal) authModal.classList.add('hidden');
                if (target === moduleViewerModal) {
                    moduleViewerModal.classList.add('hidden');
                    document.querySelector('.chapter-card.modal-source')?.classList.remove('modal-source');
                }
                if (target === videoViewerModal) {
                     const videoPlayer = document.getElementById('modal-video-player');
                     const videoSource = document.getElementById('modal-video-source');
                     if(videoPlayer) videoPlayer.pause();
                     if(videoSource) videoSource.src = "";
                     videoViewerModal.classList.add('hidden');
                }
            }

            function handleFileChange(e) {
                 if (e.target.classList.contains('file-input')) {
                    const fileInput = e.target;
                    const chapterCard = fileInput.closest('.chapter-card');
                    const chapterId = chapterCard.dataset.chapterId;
                    const fileNameSpan = chapterCard.querySelector('.file-name-display');
                    // Find buttons within the popover
                    const popoverViewBtn = chapterCard.querySelector('.chapter-resources-popover .view-module-btn');
                    const popoverDownloadBtn = chapterCard.querySelector('.chapter-resources-popover .download-module-btn');


                    if (fileInput.files.length > 0) {
                        if (!chapterFiles[chapterId]) chapterFiles[chapterId] = [];
                        
                        const newFiles = Array.from(fileInput.files);
                        newFiles.forEach(file => file.customName = file.name); 
                        
                        chapterFiles[chapterId].push(...newFiles);
                        fileNameSpan.textContent = `${chapterFiles[chapterId].length} file(s) attached.`;
                        if(popoverViewBtn) popoverViewBtn.disabled = false;
                        if(popoverDownloadBtn) popoverDownloadBtn.disabled = false;
                    }
                    fileInput.value = ''; // Reset input
                    chapterCard.querySelector('.chapter-resources-popover').classList.remove('open'); // Close popover
                }
                 
                 if (e.target.classList.contains('video-input')) {
                    const fileInput = e.target;
                    const chapterCard = fileInput.closest('.chapter-card');
                    const chapterId = chapterCard.dataset.chapterId;
                    const videoNameSpan = chapterCard.querySelector('.video-name-display');
                    // Find button within the popover
                    const popoverViewVideoBtn = chapterCard.querySelector('.chapter-resources-popover .view-video-btn');

                    if (fileInput.files.length > 0) {
                        const videoFile = fileInput.files[0];
                        chapterVideos[chapterId] = videoFile; // Store the video file
                        videoNameSpan.textContent = `Video: ${videoFile.name} attached.`;
                        if(popoverViewVideoBtn) popoverViewVideoBtn.disabled = false; // Enable the button in popover
                    }
                    fileInput.value = ''; // Reset
                    chapterCard.querySelector('.chapter-resources-popover').classList.remove('open'); // Close popover
                }
            }
            
            function handleCommentSubmit(e) {
                e.preventDefault();
                const name = this.elements['comment-name'].value.trim();
                const text = this.elements['comment-text'].value.trim();
                if (name && text) {
                    const color = avatarColors[Math.floor(Math.random() * avatarColors.length)].substring(1);
                    const initial = name.charAt(0).toUpperCase();
                    const newTestimonial = { name, text, role: 'New Student', avatar: `${color}/ffffff?text=${initial}`, likes: 0, dislikes: 0 };
                    testimonials.push(newTestimonial);
                    testimonialsGrid.insertBefore(createTestimonialCard(newTestimonial), this.parentElement);
                    this.reset();
                }
            }

            // --- Initial Setup ---
            renderCourses();
            renderTestimonials();
            setAuthModalTab(true); // Set default tab on load
            
            // Add global event listeners
            document.addEventListener('click', handleGlobalClick);
            document.addEventListener('change', handleFileChange);
            
            const modalFileList = document.getElementById('modal-file-list');
            if (modalFileList) {
                modalFileList.addEventListener('click', handleModalFileListClick);
            }
            
            if(commentForm) commentForm.addEventListener('submit', handleCommentSubmit);
            
            // Add login simulation handlers
            if(signinForm) signinForm.addEventListener('submit', (e) => {
                e.preventDefault(); // Prevent actual form submission
                isUserLoggedIn = true;
                if(authModal) authModal.classList.add('hidden');
                 // Re-enable course accordions or trigger open if needed
                 document.querySelectorAll('.course-toggle-btn').forEach(btn => {
                    // Optionally, re-render or just remove disabled state if needed
                 });
            });
            
            if(signupForm) signupForm.addEventListener('submit', (e) => {
                e.preventDefault(); // Prevent actual form submission
                isUserLoggedIn = true;
                if(authModal) authModal.classList.add('hidden');
                 // Re-enable course accordions or trigger open if needed
                 document.querySelectorAll('.course-toggle-btn').forEach(btn => {
                     // Optionally, re-render or just remove disabled state if needed
                 });
            });
        });
    </script>
</body>
</html>




